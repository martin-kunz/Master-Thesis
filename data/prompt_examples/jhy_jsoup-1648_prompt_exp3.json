[
  {
    "role": "system",
    "content": "You are an assistant for augmenting the test suite in our Java software. You write a JUnit test case that reproduce the failure behavior of the bug report."
  },
  {
    "role": "user",
    "content": "Generate a self-contained reproducing test case from the following bug report.\n\n\n# Allow attributes valid in html when converting from JSoup to W3C Document\n## Description\nConsider the following html document:\n\n\n\nunicode attr names\n\n\n\">\n```\n>\n<html>\n<head>head>\n<body style=\"color: red\" \" name\">\n <p h\u00e0nh=\"1\" h\u00ecnh=\"2\">unicode attr namesp>\nbody>html>\n```\n\nUsing v1.14.2 and running the following code:\n\n\nunicode attr names\n\n\";\n org.jsoup.nodes.Document jsoupDoc;\n jsoupDoc = Jsoup.parse(html);\n Document w3Doc = W3CDom.convert(jsoupDoc);\n System.out.println(W3CDom.asString(w3Doc, W3CDom.OutputHtml()));\n }\">\n```\n    public static void main(String[] args) {\n        String html = \"unicode attr names\n\n\";\n        org.jsoup.nodes.Document jsoupDoc;\n        jsoupDoc = Jsoup.parse(html);\n        Document w3Doc = W3CDom.convert(jsoupDoc);\n        System.out.println(W3CDom.asString(w3Doc, W3CDom.OutputHtml()));\n    }\n```\n\nResults in:\n\n\n\n\n\n\nunicode attr names\n\n\n\n\">\n```\n>\n<html>\n<head><META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">head>\n<body name=\"\" style=\"color: red\">\n <p hnh=\"2\">unicode attr namesp>\nbody>\nhtml>\n```\n\nThis is caused by [W3CDOM.java#L346](https://github.com/jhy/jsoup/blob/master/src/main/java/org/jsoup/helper/W3CDom.java#L346) hard-codes the syntax to `xml`. It can be easily fixed by checking the doctype of the output document and use that as the syntax.\n\n\n\n---\n\nTo help you, here is some relevant API documentation for the project 'jhy_jsoup':\n---\n# Javadoc Bundle for jsoup\n## org.jsoup.Connection\n> The Connection interface is a convenient HTTP client and session object to fetch content from the web, and parse them\n>  into Documents.\n>  <p>To start a new session, use either {@link org.jsoup.Jsoup#newSession()} or {@link org.jsoup.Jsoup#connect(String)}.\n>  Connections contain {@link Connection.Request} and {@link Connection.Response} objects (once executed). Configuration\n>  settings (URL, timeout, useragent, etc) set on a session will be applied by default to each subsequent request.</p>\n>  <p>To start a new request from the session, use {@link #newRequest()}.</p>\n>  <p>Cookies are stored in memory for the duration of the session. For that reason, do not use one single session for all\n>  requests in a long-lived application, or you are likely to run out of memory, unless care is taken to clean up the\n>  cookie store. The cookie store for the session is available via {@link #cookieStore()}. You may provide your own\n>  implementation via {@link #cookieStore(java.net.CookieStore)} before making requests.</p>\n>  <p>Request configuration can be made using either the shortcut methods in Connection (e.g. {@link #userAgent(String)}),\n>  or by methods in the Connection.Request object directly. All request configuration must be made before the request is\n>  executed. When used as an ongoing session, initialize all defaults prior to making multi-threaded {@link\n> #newRequest()}s.</p>\n>  <p>Note that the term \"Connection\" used here does not mean that a long-lived connection is held against a server for\n>  the lifetime of the Connection object. A socket connection is only made at the point of request execution ({@link\n> #execute()}, {@link #get()}, or {@link #post()}), and the server's response consumed.</p>\n>  <p>For multi-threaded implementations, it is important to use a {@link #newRequest()} for each request. The session may\n>  be shared across threads but a given request, not.</p>\n> GET and POST http methods.\n> Check if this HTTP method has/needs a request body\n> @return if body needed\n> Creates a new request, using this Connection as the session-state and to initialize the connection settings (which may then be independently on the returned Connection.Request object).\n>      @return a new Connection object, with a shared Cookie Store and initialized settings from this Connection and Request\n>      @since 1.14.1\n> /\n>     Connection newRequest();\n> \n>     /**\n> Set the request URL to fetch. The protocol must be HTTP or HTTPS.\n> @param url URL to connect to\n> @return this Connection, for chaining\n> /\n>     Connection url(URL url);\n> \n>     /**\n> Set the request URL to fetch. The protocol must be HTTP or HTTPS.\n> @param url URL to connect to\n> @return this Connection, for chaining\n> /\n>     Connection url(String url);\n> \n>     /**\n> Set the proxy to use for this request. Set to <code>null</code> to disable a previously set proxy.\n> @param proxy proxy to use\n> @return this Connection, for chaining\n> /\n>     Connection proxy(@Nullable Proxy proxy);\n> \n>     /**\n> Set the HTTP proxy to use for this request.\n> @param host the proxy hostname\n> @param port the proxy port\n> @return this Connection, for chaining\n> /\n>     Connection proxy(String host, int port);\n> \n>     /**\n> Set the request user-agent header.\n> @param userAgent user-agent to use\n> @return this Connection, for chaining\n> @see org.jsoup.helper.HttpConnection#DEFAULT_UA\n> /\n>     Connection userAgent(String userAgent);\n> \n>     /**\n> Set the total request timeout duration. If a timeout occurs, an {@link java.net.SocketTimeoutException} will be thrown.\n> <p>The default timeout is <b>30 seconds</b> (30,000 millis). A timeout of zero is treated as an infinite timeout.\n> <p>Note that this timeout specifies the combined maximum duration of the connection time and the time to read\n> the full response.\n> @param millis number of milliseconds (thousandths of a second) before timing out connects or reads.\n> @return this Connection, for chaining\n> @see #maxBodySize(int)\n> /\n>     Connection timeout(int millis);\n> \n>     /**\n> Set the maximum bytes to read from the (uncompressed) connection into the body, before the connection is closed,\n> and the input truncated (i.e. the body content will be trimmed). <b>The default maximum is 2MB</b>. A max size of\n> <code>0</code> is treated as an infinite amount (bounded only by your patience and the memory available on your\n> machine).\n> @param bytes number of bytes to read from the input before truncating\n> @return this Connection, for chaining\n> /\n>     Connection maxBodySize(int bytes);\n> \n>     /**\n> Set the request referrer (aka \"referer\") header.\n> @param referrer referrer to use\n> @return this Connection, for chaining\n> /\n>     Connection referrer(String referrer);\n> \n>     /**\n> Configures the connection to (not) follow server redirects. By default this is <b>true</b>.\n> @param followRedirects true if server redirects should be followed.\n> @return this Connection, for chaining\n> /\n>     Connection followRedirects(boolean followRedirects);\n> \n>     /**\n> Set the request method to use, GET or POST. Default is GET.\n> @param method HTTP request method\n> @return this Connection, for chaining\n> /\n>     Connection method(Method method);\n> \n>     /**\n> Configures the connection to not throw exceptions when a HTTP error occurs. (4xx - 5xx, e.g. 404 or 500). By\n> default this is <b>false</b>; an IOException is thrown if an error is encountered. If set to <b>true</b>, the\n> response is populated with the error body, and the status message will reflect the error.\n> @param ignoreHttpErrors - false (default) if HTTP errors should be ignored.\n> @return this Connection, for chaining\n> /\n>     Connection ignoreHttpErrors(boolean ignoreHttpErrors);\n> \n>     /**\n> Ignore the document's Content-Type when parsing the response. By default this is <b>false</b>, an unrecognised\n> content-type will cause an IOException to be thrown. (This is to prevent producing garbage by attempting to parse\n> a JPEG binary image, for example.) Set to true to force a parse attempt regardless of content type.\n> @param ignoreContentType set to true if you would like the content type ignored on parsing the response into a\n> Document.\n> @return this Connection, for chaining\n> /\n>     Connection ignoreContentType(boolean ignoreContentType);\n> \n>     /**\n> Set custom SSL socket factory\n> @param sslSocketFactory custom SSL socket factory\n> @return this Connection, for chaining\n> /\n>     Connection sslSocketFactory(SSLSocketFactory sslSocketFactory);\n> \n>     /**\n> Add a request data parameter. Request parameters are sent in the request query string for GETs, and in the\n> request body for POSTs. A request may have multiple values of the same name.\n> @param key data key\n> @param value data value\n> @return this Connection, for chaining\n> /\n>     Connection data(String key, String value);\n> \n>     /**\n> Add an input stream as a request data parameter. For GETs, has no effect, but for POSTS this will upload the\n> input stream.\n> @param key data key (form item name)\n> @param filename the name of the file to present to the remove server. Typically just the name, not path,\n> component.\n> @param inputStream the input stream to upload, that you probably obtained from a {@link java.io.FileInputStream}.\n> You must close the InputStream in a {@code finally} block.\n> @return this Connections, for chaining\n> @see #data(String, String, InputStream, String) if you want to set the uploaded file's mimetype.\n> /\n>     Connection data(String key, String filename, InputStream inputStream);\n> \n>     /**\n> Add an input stream as a request data parameter. For GETs, has no effect, but for POSTS this will upload the\n> input stream.\n> @param key data key (form item name)\n> @param filename the name of the file to present to the remove server. Typically just the name, not path,\n> component.\n> @param inputStream the input stream to upload, that you probably obtained from a {@link java.io.FileInputStream}.\n> @param contentType the Content Type (aka mimetype) to specify for this file.\n> You must close the InputStream in a {@code finally} block.\n> @return this Connections, for chaining\n> /\n>     Connection data(String key, String filename, InputStream inputStream, String contentType);\n> \n>     /**\n> Adds all of the supplied data to the request data parameters\n> @param data collection of data parameters\n> @return this Connection, for chaining\n> /\n>     Connection data(Collection<KeyVal> data);\n> \n>     /**\n> Adds all of the supplied data to the request data parameters\n> @param data map of data parameters\n> @return this Connection, for chaining\n> /\n>     Connection data(Map<String, String> data);\n> \n>     /**\n>      Add one or more request {@code key, val} data parameter pairs.<p>Multiple parameters may be set at once, e.g.:\n>      <code>.data(\"name\", \"jsoup\", \"language\", \"Java\", \"language\", \"English\");</code> creates a query string like:\n>      <code>{@literal ?name=jsoup&language=Java&language=English}</code></p>\n>      <p>For GET requests, data parameters will be sent on the request query string. For POST (and other methods that\n>      contain a body), they will be sent as body form parameters, unless the body is explicitly set by {@link\n>     #requestBody(String)}, in which case they will be query string parameters.</p>\n> \n>      @param keyvals a set of key value pairs.\n>      @return this Connection, for chaining\n> /\n>     Connection data(String... keyvals);\n> \n>     /**\n> Get the data KeyVal for this key, if any\n> @param key the data key\n> @return null if not set\n> Set a POST (or PUT) request body. Useful when a server expects a plain request body, not a set for URL\n> encoded form key/value pairs. E.g.:\n> <code><pre>Jsoup.connect(url)\n> .requestBody(json)\n> .header(\"Content-Type\", \"application/json\")\n> .post();</pre></code>\n> If any data key/vals are supplied, they will be sent as URL query params.\n> @return this Request, for chaining\n> /\n>     Connection requestBody(String body);\n> \n>     /**\n> Set a request header.\n> @param name header name\n> @param value header value\n> @return this Connection, for chaining\n> @see org.jsoup.Connection.Request#headers()\n> /\n>     Connection header(String name, String value);\n> \n>     /**\n> Adds each of the supplied headers to the request.\n> @param headers map of headers name {@literal ->} value pairs\n> @return this Connection, for chaining\n> @see org.jsoup.Connection.Request#headers()\n> /\n>     Connection headers(Map<String,String> headers);\n> \n>     /**\n> Set a cookie to be sent in the request.\n> @param name name of cookie\n> @param value value of cookie\n> @return this Connection, for chaining\n> /\n>     Connection cookie(String name, String value);\n> \n>     /**\n> Adds each of the supplied cookies to the request.\n> @param cookies map of cookie name {@literal ->} value pairs\n> @return this Connection, for chaining\n> /\n>     Connection cookies(Map<String, String> cookies);\n> \n>     /**\n>      Provide a custom or pre-filled CookieStore to be used on requests made by this Connection.\n>      @param cookieStore a cookie store to use for subsequent requests\n>      @return this Connection, for chaining\n>      @since 1.14.1\n> /\n>     Connection cookieStore(CookieStore cookieStore);\n> \n>     /**\n>      Get the cookie store used by this Connection.\n>      @return the cookie store\n>      @since 1.14.1\n> /\n>     CookieStore cookieStore();\n> \n>     /**\n> Provide an alternate parser to use when parsing the response to a Document. If not set, defaults to the HTML\n> parser, unless the response content-type is XML, in which case the XML parser is used.\n> @param parser alternate parser\n> @return this Connection, for chaining\n> /\n>     Connection parser(Parser parser);\n> \n>     /**\n> Sets the default post data character set for x-www-form-urlencoded post data\n> @param charset character set to encode post data\n> @return this Connection, for chaining\n> /\n>     Connection postDataCharset(String charset);\n> \n>     /**\n> Execute the request as a GET, and parse the result.\n> @return parsed Document\n> @throws java.net.MalformedURLException if the request URL is not a HTTP or HTTPS URL, or is otherwise malformed\n> @throws HttpStatusException if the response is not OK and HTTP response errors are not ignored\n> @throws UnsupportedMimeTypeException if the response mime type is not supported and those errors are not ignored\n> @throws java.net.SocketTimeoutException if the connection times out\n> @throws IOException on error\n> /\n>     Document get() throws IOException;\n> \n>     /**\n> Execute the request as a POST, and parse the result.\n> @return parsed Document\n> @throws java.net.MalformedURLException if the request URL is not a HTTP or HTTPS URL, or is otherwise malformed\n> @throws HttpStatusException if the response is not OK and HTTP response errors are not ignored\n> @throws UnsupportedMimeTypeException if the response mime type is not supported and those errors are not ignored\n> @throws java.net.SocketTimeoutException if the connection times out\n> @throws IOException on error\n> /\n>     Document post() throws IOException;\n> \n>     /**\n> Execute the request.\n> @return a response object\n> @throws java.net.MalformedURLException if the request URL is not a HTTP or HTTPS URL, or is otherwise malformed\n> @throws HttpStatusException if the response is not OK and HTTP response errors are not ignored\n> @throws UnsupportedMimeTypeException if the response mime type is not supported and those errors are not ignored\n> @throws java.net.SocketTimeoutException if the connection times out\n> @throws IOException on error\n> /\n>     Response execute() throws IOException;\n> \n>     /**\n> Get the request object associated with this connection\n> @return request\n> /\n>     Request request();\n> \n>     /**\n> Set the connection's request\n> @param request new request object\n> @return this Connection, for chaining\n> /\n>     Connection request(Request request);\n> \n>     /**\n> Get the response, once the request has been executed.\n> @return response\n> @throws IllegalArgumentException if called before the response has been executed.\n> /\n>     Response response();\n> \n>     /**\n> Set the connection's response\n> @param response new response\n> @return this Connection, for chaining\n> /\n>     Connection response(Response response);\n> \n>     /**\n> Common methods for Requests and Responses\n> @param <T> Type of Base, either Request or Response\n> Get the URL of this Request or Response. For redirected responses, this will be the final destination URL.\n> @return URL\n> @throws IllegalArgumentException if called on a Request that was created without a URL.\n> /\n>         URL url();\n> \n>         /**\n> Set the URL\n> @param url new URL\n> @return this, for chaining\n> /\n>         T url(URL url);\n> \n>         /**\n> Get the request method, which defaults to <code>GET</code>\n> @return method\n> /\n>         Method method();\n> \n>         /**\n> Set the request method\n> @param method new method\n> @return\n[...truncated...]\n\n\n\n---\nIMPORTANT: Your entire response must be *only* the Java code for the test method. Start your response directly with the method signature `public void test`."
  }
]